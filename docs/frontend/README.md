# 前端开发文档

## 项目结构

```
miniprogram/
├── pages/
│   ├── index/              # 首页
│   │   ├── index.js
│   │   ├── index.wxml
│   │   ├── index.wxss
│   │   └── index.json
│   ├── course-detail/      # 课程详情页
│   │   ├── course-detail.js
│   │   ├── course-detail.wxml
│   │   ├── course-detail.wxss
│   │   └── course-detail.json
│   ├── record-detail/      # 记录详情页
│   │   ├── record-detail.js
│   │   ├── record-detail.wxml
│   │   ├── record-detail.wxss
│   │   └── record-detail.json
│   └── profile/            # 我的页面
│       ├── profile.js
│       ├── profile.wxml
│       ├── profile.wxss
│       └── profile.json
├── utils/
│   ├── api.js              # API请求封装
│   ├── auth.js             # 认证相关
│   └── util.js             # 工具函数
├── app.js
├── app.json
└── app.wxss
```

## 技术栈

- **框架**: 微信小程序原生框架
- **HTTP请求**: wx.request 封装
- **状态管理**: 全局变量或简单状态管理

## 功能模块

### 1. 用户认证
- 微信授权登录
- Token存储和管理
- Token自动刷新
- 登录状态检查

### 2. 首页
- Banner轮播图组件
- 课程列表（双列卡片布局）
  - 显示课程名称
  - 显示最后一节课的记录时间
  - 显示总上课次数
- 底部导航栏（首页、我的）
- 下拉刷新和上拉加载

### 3. 课程详情页
- 记录列表展示
  - 按创建时间倒序排列
  - 显示创建时间、备注文字、图片
- 新增记录按钮（大按钮，位于列表下方）
- 点击记录进入记录详情

### 4. 记录详情页
- 记录信息展示
  - 创建时间
  - 备注文字（可编辑）
  - 已上传的图片
- 备注编辑功能
- 图片上传功能
- 图片预览功能

### 5. 我的页面
- 用户信息展示（头像、昵称、角色）
- 退出登录功能
- 管理员功能入口

## 开发步骤

### 第一阶段：项目初始化
1. 创建微信小程序项目
2. 配置 app.json（页面路由、tabBar等）
3. 封装API请求工具
4. 实现Token存储和管理
5. 初始化基础样式和工具函数

### 第二阶段：用户认证
1. 实现微信授权登录
2. 实现Token自动刷新
3. 全局状态管理（用户信息）
4. 登录状态检查

### 第三阶段：首页开发
1. 实现Banner轮播图组件
2. 实现课程列表（双列卡片布局）
3. 实现底部导航栏
4. 数据获取和展示逻辑
5. 下拉刷新和上拉加载

### 第四阶段：课程详情页
1. 实现记录列表展示
2. 实现新增记录功能
3. 实现记录排序（按创建时间倒序）
4. 页面跳转逻辑

### 第五阶段：记录详情页
1. 实现记录信息展示（包含备注文字）
2. 实现备注编辑功能
3. 实现图片上传功能
4. 实现图片预览功能
5. 数据更新逻辑

### 第六阶段：我的页面
1. 实现用户信息展示
2. 实现退出登录功能
3. 预留管理员功能入口

### 第七阶段：优化和测试
1. 用户体验优化
2. 错误处理和异常捕获
3. 性能优化
4. 功能测试

## API 调用

参考 [API 接口文档](../api/README.md) 了解后端接口详情。

## 注意事项

1. **用户体验**
   - 加载状态提示
   - 错误提示友好化
   - 操作反馈及时
   - 网络错误重试机制

2. **数据安全**
   - Token安全存储
   - 请求拦截和错误处理
   - 用户输入验证

3. **性能优化**
   - 图片懒加载
   - 列表分页加载
   - 数据缓存

